<img src="https://github.com/hitblast/cutler/blob/v0.1.0/assets/logo.png" width="200px" align="right">

# <img src="https://raw.githubusercontent.com/github/explore/80688e429a7d4ef2fca1e82350fe8e3517d3494d/topics/rust/rust.png" width="40px"> cutler

[![Release Builds](https://github.com/hitblast/cutler/actions/workflows/release.yml/badge.svg)](https://github.com/hitblast/cutler/actions/workflows/release.yml)

Declarative macOS settings management at your fingertips, with speed. <br>

```bash
# Install using Homebrew.
brew install hitblast/tap/cutler
```

> [!IMPORTANT]
> Prebuilt binaries are compiled on and shipped from macOS 14 on arm64 architecture.
> Expect it to work on suitable Macs with same architecture.

## Table of Contents

- [Overview](#overview)
- [Installation Methods](installation-methods)
- [Usage](#usage)
- [Contributing](#contributing)
- [License](#license)

## Overview

Most of us, who use macOS, either configure it using the built-in System Settings app, or the `defaults` command-line tool.
Both of these options are tedious and the latter requires manual tinkering with the settings inside a terminal. `cutler` is a
project which solves just that!

It is a simple command-line interface which you can use to store your macOS system preferences by declaring them inside a
TOML file. It wraps around the existing `defaults` command and gives you an easy-to-use way of applying and unapplying
settings/values on the go.

See the [Usage](#usage) section to learn more.

## Installation Methods

Aside of Homebrew (given at the top of page), you can use either the `cargo`
package manager or [mise](https://mise.jdx.dev) for installating cutler.

- Using `cargo`:

```bash
cargo install cutler
```

- Using `mise`:

```bash
mise use -g cargo
```

> [!TIP]
> If you still can't find a suitable installation method, consider looking at the latest GitHub release.
> Or, consider the periodic release workflows which have a 90-day retention period.

## Usage

The interface reads your set configuration values from a `config.toml` file,
which can be located inside these directories:

- `$XDG_CONFIG_HOME/cutler/config.toml` or,
- `~/.config/cutler/config.toml`

Moreover, `cutler` respects the `$XDG_CONFIG_HOME` variable so you don't have to
worry about it messing up any paths indefinitely. Just place the `config.toml`
file in these locations and the interface will find it.

The structure of the file should be as follows:

```toml
[dock]
tilesize = 46

[menuextra.clock]
FlashDateSeparators = true
```

Please check out [Resources](#resources) for references regarding the different types of `defaults` domains
and values for macOS users. For now, the TOML code above translates to these commands:

```bash
defaults write com.apple.dock "tilesize" -int "46"
defaults write com.apple.menuextra.clock "FlashDateSeparators"
```

For `NSGlobalDomain`, you can add keys and subdomains like this:

```toml
[NSGlobalDomain]
ApplePressAndHoldEnabled = true

[NSGlobalDomain.com.apple.mouse]
linear = true
```

Please note that the sample configuration built-into cutler can be generated by running
`cutler apply` for the first time without any configuration file. You can also
check out [examples/cutler.toml](https://github.com/hitblast/cutler/blob/main/examples/cutler.toml) for the full example.

Once you finish writing the file, apply the written configurations using this command:

```bash
cutler apply
```

> [!NOTE]
> When cutler finishes writing the defaults, it'll restart the associated system services for your Mac to apply the changes.
> Some services may require a full reboot to take effect.

To unapply the configuration, run:

```bash
cutler unapply
```

If you'd like to remove the file entirely, you can run the following command:
(generally not recommended since currently applied settings could become untrackable)

```bash
cutler delete
```

## Resources

Figuring out the perfect list of defaults to set for your configuration can be tedious.
So, you can check out [the "macOS defaults" website](https://macos-defaults.com/) for a full list of domains.

## Contributing

This is one of my hobby projects that I've made to solve one of my most common
problems - repeatedly applying the same settings on my MacBook. So, pull
requests are always welcome! Feel free to submit your changes or improvements by
[creating a pull request]() or by [submitting an issue]().

## License

This project has been licensed under the [MIT License](LICENSE).
